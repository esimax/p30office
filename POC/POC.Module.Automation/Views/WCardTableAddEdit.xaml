<dx:DXWindow
    x:Class="POC.Module.Automation.Views.WCardTableAddEdit"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
    
    Width="600"
    Height="440" 
    
    Title="{Binding WindowTitle}"
    Icon="{DynamicResource ApplicationIcon}"
    
    xmlns:pol_ap="clr-namespace:POL.WPF.Controles.AttachProperties;assembly=POL.WPF.Controles"
    xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
    xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
    xmlns:pol_wpf="clr-namespace:POL.WPF.DXControls.POLDateEdit;assembly=POL.WPF.DXControls"
    WindowStartupLocation="CenterScreen"
    ResizeMode="NoResize" 
    
    FontFamily="{DynamicResource ApplicationFontFamily}" 
    FontSize="{DynamicResource ApplicationFontSize}"
    >

    <Grid pol_ap:ApGrid.RowDefinitions="auto,*,auto" 
          pol_ap:ApGrid.ColumnDefinitions="auto,*" Margin="9" 
          FlowDirection="{DynamicResource ApplicationFlowDirection}">


        <TextBlock Grid.Row="0" Grid.Column="0" Margin="3" VerticalAlignment="Center" Text="عنوان :" />
        <dxe:TextEdit Grid.Row="0" Grid.Column="1" Margin="3" EditValue="{Binding Title,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" MinWidth="200" MaxLength="64" 
                      Name="firstFocused"  />
        

        <dx:DXTabControl Grid.Row="1" Grid.ColumnSpan="2" Margin="3">
            <dx:DXTabItem Header="نحوه ارسال">
                <Grid pol_ap:ApGrid.RowDefinitions="auto,auto,auto,*" pol_ap:ApGrid.ColumnDefinitions="auto,*,auto" Name="g1">
                    
                    <TextBlock Grid.Row="0" Grid.Column="0" Margin="3" VerticalAlignment="Center" Text="ارسال برای :" />
                    <dxe:ComboBoxEdit Grid.Row="0" Grid.Column="1" Margin="3" 
                                      SelectedIndex="{Binding SendToType,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" 
                                      InvalidValueBehavior="AllowLeaveEditor" IsTextEditable="false" AutoComplete="false" 
                                      ImmediatePopup="True" AllowSpinOnMouseWheel="False">
                        <dxe:ComboBoxEditItem Content="همه"/>
                        <dxe:ComboBoxEditItem Content="سطح دسترسی"/>
                        <dxe:ComboBoxEditItem Content="كاربر"/>
                    </dxe:ComboBoxEdit>
                    <dxe:ComboBoxEdit Grid.Row="1" Grid.Column="1" Margin="3" ItemsSource="{Binding SendToList}" 
                                      EditValue="{Binding SelectedSendTo,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" 
                                      InvalidValueBehavior="AllowLeaveEditor" IsTextEditable="false"  
                                      ImmediatePopup="True" IsEnabled="{Binding SendToEnabled}" AllowSpinOnMouseWheel="False">
                    </dxe:ComboBoxEdit>

                    <TextBlock Grid.Row="2" Grid.Column="0" Margin="3" VerticalAlignment="Top" Text="اولویت :" />
                    <Grid Grid.Row="2" Grid.Column="1" pol_ap:ApGrid.ColumnDefinitions="auto,*,auto">
                        <TextBlock Grid.Column="0" Text="زیاد" Margin="3"/>
                        <dxe:TrackBarEdit Grid.Column="1" Margin="3" TickFrequency="1" LargeStep="1" Maximum="5" Value="{Binding Priority,Mode=TwoWay}" Minimum="1"/>
                        <TextBlock Grid.Column="2" Text="كم" Margin="3"/>
                    </Grid>
                    <TextBlock Grid.Row="3" Grid.Column="0" Margin="3,6" VerticalAlignment="Top" Text="توضیحات :" />
                    <dxe:TextEdit Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="4" Margin="3" 
                        MaxLength="2024" InvalidValueBehavior="AllowLeaveEditor" VerticalScrollBarVisibility="Visible" 
                        VerticalContentAlignment="Top" HorizontalScrollBarVisibility="Auto" AcceptsReturn="True"
                        EditValue="{Binding Notes}"/>
                </Grid>
            </dx:DXTabItem>
            <dx:DXTabItem Header="زمانبندی">
                <Grid pol_ap:ApGrid.RowDefinitions="auto,auto,auto,auto,*" pol_ap:ApGrid.ColumnDefinitions="auto,auto,*" Name="g2">
                    <dxe:CheckEdit Grid.Row="0" Margin="3"  Content="تعیین زمان شروع" IsChecked="{Binding HasStartTime}"/>
                    <dxe:TextEdit Margin="3" Grid.Row="0" Grid.Column="1" FlowDirection = "LeftToRight" Width="80"
                                      Mask = "([01]?[0-9]|2[0-3]):[0-5]\d" MaskType = "RegEx" MaskUseAsDisplayFormat = "True"
                                      EditValue="{Binding StartTime,Mode=TwoWay}"
                                  IsEnabled="{Binding HasStartTime}"
                                  />
                    <pol_wpf:POLDateEdit Margin="3" Grid.Row="0" Grid.Column="2" DateEditValue="{Binding StartDate,Mode=TwoWay}"  
                                         IsEnabled="{Binding HasStartTime}"/>
                    <dxe:CheckEdit Grid.Row="1" Margin="32,3,3,3"  Content="اتوماسیون"  IsEnabled="{Binding HasStartTime}" IsChecked="{Binding HasStartAutomation}"/>
                    <dxe:ComboBoxEdit Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="2" Margin="3" 
                                    IsEnabled="{Binding StartAutomationEnabled}" IsTextEditable="False"
                                    ItemsSource="{Binding AutomationList}" SelectedItem="{Binding SelectedStartAutomation}"
                                      AllowSpinOnMouseWheel="False">
                        <dxe:ComboBoxEdit.Buttons>
                            <dxe:ButtonInfo GlyphKind="Plus" Command="{Binding CommandStartAutomationAddAutomation}"/>
                        </dxe:ComboBoxEdit.Buttons>
                    </dxe:ComboBoxEdit>



                    <dxe:CheckEdit Grid.Row="2" Margin="3"  Content="تعیین مهلت اجرا" IsChecked="{Binding HasEndTime}"/>
                    <dxe:TextEdit Margin="3" Grid.Row="2" Grid.Column="1" FlowDirection = "LeftToRight" Width="80"
                                      Mask = "([01]?[0-9]|2[0-3]):[0-5]\d" MaskType = "RegEx" MaskUseAsDisplayFormat = "True"
                                      EditValue="{Binding EndTime,Mode=TwoWay}" 
                                  IsEnabled="{Binding HasEndTime}"/>
                    <pol_wpf:POLDateEdit Margin="3" Grid.Row="2" Grid.Column="2" DateEditValue="{Binding EndDate,Mode=TwoWay}"
                                         IsEnabled="{Binding HasEndTime}"/>


                    <dxe:CheckEdit Grid.Row="3" Margin="32,3,3,3"  Content="اتوماسیون" IsEnabled="{Binding HasEndTime}" IsChecked="{Binding HasEndAutomation}"/>
                    <dxe:ComboBoxEdit Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="2" Margin="3" 
                                    IsEnabled="{Binding EndAutomationEnabled}" IsTextEditable="False"
                                    ItemsSource="{Binding AutomationList}" SelectedItem="{Binding SelectedEndAutomation}" AllowSpinOnMouseWheel="False">
                        <dxe:ComboBoxEdit.Buttons>
                            <dxe:ButtonInfo GlyphKind="Plus" Command="{Binding CommandEndAutomationAddAutomation}"/>
                        </dxe:ComboBoxEdit.Buttons>
                    </dxe:ComboBoxEdit>
                </Grid>
            </dx:DXTabItem>
            <dx:DXTabItem Header="ضمائم">
                <Grid pol_ap:ApGrid.RowDefinitions="auto,auto,auto,auto,auto,auto,*" pol_ap:ApGrid.ColumnDefinitions="auto,*" Name="g3">
                    <dxe:CheckEdit Grid.Row="0" Margin="3"  Content="شماره تماس" IsEnabled="{Binding AttachmentCallEnable}" IsChecked="{Binding HasAttachmentCall}"/>
                    <dxe:ButtonEdit Grid.Row="0" Grid.Column="1" Margin="3" EditValue="{Binding AttachmentCall}" IsEnabled="{Binding HasAttachmentCall}" 
                                    IsReadOnly="True" IsTextEditable="False" AllowDefaultButton="False" >
                        <dxe:ButtonInfo GlyphKind="Regular" Command="{Binding CommandAttCall}"/>
                    </dxe:ButtonEdit>

                    <dxe:CheckEdit Grid.Row="1" Margin="3"  Content="ایمیل" IsEnabled="{Binding AttachmentEmailEnable}" IsChecked="{Binding HasAttachmentEmail}"/>
                    <dxe:ButtonEdit Grid.Row="1" Grid.Column="1" Margin="3" EditValue="{Binding AttachmentEmail}" IsEnabled="{Binding HasAttachmentEmail}"
                                    IsReadOnly="True" IsTextEditable="False" AllowDefaultButton="False" >
                        <dxe:ButtonInfo GlyphKind="Regular" Command="{Binding CommandAttEmail}"/>
                    </dxe:ButtonEdit>

                    <dxe:CheckEdit Grid.Row="2" Margin="3"  Content="پیامك" IsEnabled="{Binding AttachmentSMSEnable}" IsChecked="{Binding HasAttachmentSMS}"/>
                    <dxe:ButtonEdit Grid.Row="2" Grid.Column="1" Margin="3" EditValue="{Binding AttachmentSMS}" IsEnabled="{Binding HasAttachmentSMS}"
                                    IsReadOnly="True" IsTextEditable="False" AllowDefaultButton="False" >
                        <dxe:ButtonInfo GlyphKind="Regular" Command="{Binding CommandAttSMS}"/>
                    </dxe:ButtonEdit>

                    <dxe:CheckEdit Grid.Row="3" Margin="3"  Content="پرونده" IsEnabled="{Binding AttachmentContactEnable}" IsChecked="{Binding HasAttachmentContact}"/>
                    <dxe:ButtonEdit Grid.Row="3" Grid.Column="1" Margin="3" EditValue="{Binding AttachmentContact}" IsEnabled="{Binding HasAttachmentContact}"
                                    IsReadOnly="True" IsTextEditable="False" AllowDefaultButton="False" >
                        <dxe:ButtonInfo GlyphKind="Regular" Command="{Binding CommandAttContact}"/>
                        <dxe:ButtonInfo GlyphKind="NextPage" Command="{Binding CommandAttContactGoto}"/>
                    </dxe:ButtonEdit>

                    <dxe:CheckEdit Grid.Row="4" Margin="3"  Content="دسته" IsEnabled="{Binding AttachmentCategoryEnable}" IsChecked="{Binding HasAttachmentCategory}"/>
                    <dxe:ButtonEdit Grid.Row="4" Grid.Column="1" Margin="3" EditValue="{Binding AttachmentCategory}" IsEnabled="{Binding HasAttachmentCategory}"
                                    IsReadOnly="True" IsTextEditable="False" AllowDefaultButton="False" >
                        <dxe:ButtonInfo GlyphKind="Regular" Command="{Binding CommandAttCategory}"/>
                    </dxe:ButtonEdit>

                    <dxe:CheckEdit Grid.Row="5" Margin="3"  Content="فایل" IsEnabled="{Binding AttachmentFileEnable}" IsChecked="{Binding HasAttachmentFile}"/>
                    <dxe:ButtonEdit Grid.Row="5" Grid.Column="1" Margin="3" EditValue="{Binding AttachmentFileName}" IsEnabled="{Binding HasAttachmentFile}"
                                    IsReadOnly="True" IsTextEditable="False" AllowDefaultButton="False" >
                        <dxe:ButtonInfo GlyphKind="Regular" Command="{Binding CommandAttFile}"/>
                        <dxe:ButtonInfo GlyphKind="Search" Command="{Binding CommandOpenAttFile}"/>
                        <dxe:ButtonInfo GlyphKind="Cancel" Command="{Binding CommandUnAttFile}"/>
                    </dxe:ButtonEdit>
                </Grid>
            </dx:DXTabItem>
            <dx:DXTabItem Header="نتیجه">
                <Grid pol_ap:ApGrid.RowDefinitions="auto,auto,auto,auto,auto,*,auto" pol_ap:ApGrid.ColumnDefinitions="auto,*" Name="g4">
                    <TextBlock Grid.Row="0" Margin="3" VerticalAlignment="Center" Text="ثبت كننده :" />
                    <TextBlock Grid.Row="0" Grid.Column="1" Margin="3" VerticalAlignment="Center" Text="{Binding Creator}" />
                    
                    <TextBlock Grid.Row="1" Margin="3" VerticalAlignment="Center" Text="ثبت تاریخ :" />
                    <TextBlock Grid.Row="1" Grid.Column="1" Margin="3" VerticalAlignment="Center" Text="{Binding CreatedDate}" />

                    <TextBlock Grid.Row="2" Margin="3" VerticalAlignment="Center" Text="تاریخ اتمام :" />
                    <TextBlock Grid.Row="2" Grid.Column="1" Margin="3" VerticalAlignment="Center" Text="{Binding ResultDate}" />

                    <TextBlock Grid.Row="3" Margin="3" VerticalAlignment="Center" Text="اجرا كننده :" />
                    <TextBlock Grid.Row="3" Grid.Column="1" Margin="3" VerticalAlignment="Center" Text="{Binding ResultUser}" />
                    
                    <TextBlock Grid.Row="4" Margin="3" VerticalAlignment="Center" Text="نتیجه :" />
                    <dxe:ComboBoxEdit Grid.Row="4" Grid.Column="1" Margin="3" 
                                    IsTextEditable="False"
                                    SelectedIndex="{Binding SelectedResult}" AllowSpinOnMouseWheel="False">
                        <dxe:ComboBoxEditItem Content="بدون نتیجه"/>
                        <dxe:ComboBoxEditItem Content="در حال اجرا"/>
                        <dxe:ComboBoxEditItem Content="انجام شد"/>
                        <dxe:ComboBoxEditItem Content="لغو شد"/>
                        <dxe:ComboBoxEditItem Content="ارجاع شد"/>
                        <dxe:ComboBoxEditItem Content="انجام نشد"/>
                    </dxe:ComboBoxEdit>
                    
                    <TextBlock Grid.Row="5" Margin="3,6" VerticalAlignment="Top" Text="توضیحات اجرا :" />
                    <dxe:TextEdit Grid.Row="5" Grid.Column="1" Margin="3" 
                        MaxLength="1024" InvalidValueBehavior="AllowLeaveEditor" VerticalScrollBarVisibility="Visible" 
                        VerticalContentAlignment="Top" HorizontalScrollBarVisibility="Auto" AcceptsReturn="True"
                        EditValue="{Binding ResultText}"/>
                    
                    <dxe:CheckEdit Grid.Row="6" Margin="3"  Content="اتوماسیون" IsEnabled="{Binding ResultAutomationEnable}" IsChecked="{Binding HasResultAutomation}"/>
                    <dxe:ComboBoxEdit Grid.Row="6" Grid.Column="1" Margin="3" 
                                    IsEnabled="{Binding HasResultAutomation}" IsTextEditable="False"
                                    ItemsSource="{Binding AutomationList}" SelectedItem="{Binding SelectedResultAutomation}" AllowSpinOnMouseWheel="False">
                        <dxe:ComboBoxEdit.Buttons>
                            <dxe:ButtonInfo GlyphKind="Plus" Command="{Binding CommandResultAutomationAddAutomation}"/>
                        </dxe:ComboBoxEdit.Buttons>
                    </dxe:ComboBoxEdit>
                </Grid>
            </dx:DXTabItem>
        </dx:DXTabControl>

        


        <StackPanel Grid.Row="1000" Grid.ColumnSpan="1000" Orientation="Horizontal" Margin="3" HorizontalAlignment="Right">
            <Button Margin="0" Padding="6,3" MinWidth="80" IsDefault="True"
                    Command="{Binding CommandOK}">
                <StackPanel Orientation="Horizontal">
                    <Image Style="{DynamicResource ImageSave16}" />
                    <TextBlock Margin="3" VerticalAlignment="Center" Text="ثبت"/>
                </StackPanel>
            </Button>
            <Button Margin="12,0,0,0" Padding="6,3" MinWidth="80" IsCancel="True"
                    Command="{Binding CommandCancel}">
                <StackPanel Orientation="Horizontal">
                    <Image Style="{DynamicResource ImageCancel16}" />
                    <TextBlock Margin="3" VerticalAlignment="Center" Text="لغو"/>
                </StackPanel>
            </Button>
            <Button Margin="12,0,0,0" Padding="6,3" MinWidth="80"
                    Command="{Binding CommandCancel}">
                <StackPanel Orientation="Horizontal">
                    <Image Style="{DynamicResource ImageHelp16}" />
                    <TextBlock Margin="3" VerticalAlignment="Center" Text="راهنما"/>
                </StackPanel>
            </Button>
        </StackPanel>
       
    </Grid>
</dx:DXWindow>
